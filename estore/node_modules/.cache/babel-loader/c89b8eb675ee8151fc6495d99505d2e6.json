{"ast":null,"code":"import * as actionTypes from \"./types\";\nimport axios from \"axios\";\nconst productCategories = [{\n  Id: 1,\n  Category: \"Kids\",\n  SubCategory: [{\n    Id: 1,\n    Name: \"Dresses\"\n  }, {\n    Id: 2,\n    Name: \"Jacket\"\n  }]\n}, {\n  Id: 2,\n  Category: \"Men\",\n  SubCategory: [{\n    Id: 1,\n    Name: \"TShirt\"\n  }, {\n    Id: 2,\n    Name: \"Jacket\"\n  }]\n}];\nconst product = [{\n  Id: 1,\n  imageSrc: require(\"../../../assets/img/shop/shop-1.jpg\"),\n  name: \"Product 1\",\n  price: \"$10.00\"\n}, {\n  Id: 2,\n  imageSrc: require(\"../../../assets/img/shop/shop-2.jpg\"),\n  name: \"Product 2\",\n  price: \"$20.00\"\n}, {\n  Id: 3,\n  imageSrc: require(\"../../../assets/img/shop/shop-3.jpg\"),\n  name: \"Product 3\",\n  price: \"$25.00\"\n}];\nexport const getProductCategories = () => async dispatch => {\n  let tempCat = [];\n  await axios({\n    method: \"get\",\n    url: \"http://localhost:5000/product/api/getCategories\"\n  }).then(res => {\n    console.log(\"RESPONSE FROM API\", res.data);\n    let parentCat = res.data.data.filter(x => x.parentcategoryid === null);\n    parentCat.map(item => {\n      let t = {\n        Id: item.id,\n        Category: item.category,\n        SubCategory: res.data.data.filter(x => x.parentcategoryid === item.id).map(y => {\n          return {\n            Id: y.id,\n            Name: y.category\n          };\n        })\n      };\n      return tempCat.push(t);\n    });\n  }).catch(err => {\n    console.log(\"RESPONSE ERROR\", err);\n  });\n  dispatch({\n    type: actionTypes.PRODUCT_CATEGORY,\n    data: tempCat\n  });\n};\nexport const getProducts = () => async dispatch => {\n  await axios({\n    method: \"get\",\n    url: \"http://localhost:5000/product/api/getProducts\"\n  }).then(res => {\n    try {\n      let productList = res.data.data.map(item => {\n        return {\n          Id: item.id,\n          categoryId: item.categoryid,\n          imageSrc: `http://localhost:5000/${item.producting}`,\n          name: item.productname,\n          price: item.price\n        };\n      });\n      dispatch(_getProducts(productList));\n      dispatch(_getFilteredProducts(productList));\n    } catch (ex) {\n      console.log(ex);\n    }\n  }).catch(err => {\n    console.log(\"catch err\", err);\n  });\n\n  // dispatch({\n  //     type: actionTypes.PRODUCT,\n  //     data: product\n  // })\n};\nexport const _getProducts = data => {\n  return {\n    type: actionTypes.PRODUCT,\n    data\n  };\n};\nexport const _getFilteredProducts = data => {\n  return {\n    type: actionTypes.FILTER_PRODUCT,\n    data\n  };\n};\nexport const applyFilter = (param, data) => async dispatch => {\n  let query = buildQuery(param);\n  console.log(\"Build Query\", query);\n  let filteredData = filterData(data.products, query);\n  dispatch(_getFilteredProducts(filteredData));\n};\nconst buildQuery = filter => {\n  let query = {};\n  for (let keys in filter) {\n    query[keys] = filter[keys];\n  }\n  return query;\n};\nconst filterData = (data, query) => {\n  const keysHavingMinMax = [\"price\"];\n  const filteredData = data.filter(item => {\n    for (let keys in query) {\n      if (query[keys] === undefined) return false;else if (keysHavingMinMax.includes(keys)) {\n        if (query[keys][\"min\"] !== null && item[keys] < query[keys][\"min\"]) {\n          return false;\n        }\n        if (query[keys][\"max\"] !== null && item[keys] > query[keys][\"max\"]) {\n          return false;\n        }\n      } else if (!query[keys].includes(item[keys])) return false;\n    }\n    return true;\n  });\n  return filteredData;\n};","map":{"version":3,"names":["actionTypes","axios","productCategories","Id","Category","SubCategory","Name","product","imageSrc","require","name","price","getProductCategories","dispatch","tempCat","method","url","then","res","console","log","data","parentCat","filter","x","parentcategoryid","map","item","t","id","category","y","push","catch","err","type","PRODUCT_CATEGORY","getProducts","productList","categoryId","categoryid","producting","productname","_getProducts","_getFilteredProducts","ex","PRODUCT","FILTER_PRODUCT","applyFilter","param","query","buildQuery","filteredData","filterData","products","keys","keysHavingMinMax","undefined","includes"],"sources":["C:/Users/Dell/Desktop/ECommerce/estore/src/redux/actions/product/index.js"],"sourcesContent":["import * as actionTypes from \"./types\";\r\nimport axios from \"axios\";\r\n\r\nconst productCategories = [\r\n  {\r\n    Id: 1,\r\n    Category: \"Kids\",\r\n    SubCategory: [\r\n      {\r\n        Id: 1,\r\n        Name: \"Dresses\",\r\n      },\r\n      {\r\n        Id: 2,\r\n        Name: \"Jacket\",\r\n      },\r\n    ],\r\n  },\r\n  {\r\n    Id: 2,\r\n    Category: \"Men\",\r\n    SubCategory: [\r\n      {\r\n        Id: 1,\r\n        Name: \"TShirt\",\r\n      },\r\n      {\r\n        Id: 2,\r\n        Name: \"Jacket\",\r\n      },\r\n    ],\r\n  },\r\n];\r\n\r\nconst product = [\r\n  {\r\n    Id: 1,\r\n    imageSrc: require(\"../../../assets/img/shop/shop-1.jpg\"),\r\n    name: \"Product 1\",\r\n    price: \"$10.00\",\r\n  },\r\n  {\r\n    Id: 2,\r\n    imageSrc: require(\"../../../assets/img/shop/shop-2.jpg\"),\r\n    name: \"Product 2\",\r\n    price: \"$20.00\",\r\n  },\r\n  {\r\n    Id: 3,\r\n    imageSrc: require(\"../../../assets/img/shop/shop-3.jpg\"),\r\n    name: \"Product 3\",\r\n    price: \"$25.00\",\r\n  },\r\n];\r\n\r\nexport const getProductCategories = () => async (dispatch) => {\r\n  let tempCat = [];\r\n  await axios({\r\n    method: \"get\",\r\n    url: \"http://localhost:5000/product/api/getCategories\",\r\n  })\r\n    .then((res) => {\r\n      console.log(\"RESPONSE FROM API\", res.data);\r\n\r\n      let parentCat = res.data.data.filter((x) => x.parentcategoryid === null);\r\n\r\n      parentCat.map((item) => {\r\n        let t = {\r\n          Id: item.id,\r\n          Category: item.category,\r\n          SubCategory: res.data.data\r\n            .filter((x) => x.parentcategoryid === item.id)\r\n            .map((y) => {\r\n              return {\r\n                Id: y.id,\r\n                Name: y.category,\r\n              };\r\n            }),\r\n        };\r\n        return tempCat.push(t);\r\n      });\r\n    })\r\n    .catch((err) => {\r\n      console.log(\"RESPONSE ERROR\", err);\r\n    });\r\n\r\n  dispatch({\r\n    type: actionTypes.PRODUCT_CATEGORY,\r\n    data: tempCat,\r\n  });\r\n};\r\n\r\nexport const getProducts = () => async (dispatch) => {\r\n  await axios({\r\n    method: \"get\",\r\n    url: \"http://localhost:5000/product/api/getProducts\",\r\n  })\r\n    .then((res) => {\r\n      try {\r\n        let productList = res.data.data.map((item) => {\r\n          return {\r\n            Id: item.id,\r\n            categoryId: item.categoryid,\r\n            imageSrc: `http://localhost:5000/${item.producting}`,\r\n            name: item.productname,\r\n            price: item.price,\r\n          };\r\n        });\r\n        dispatch(_getProducts(productList));\r\n        dispatch(_getFilteredProducts(productList));\r\n      } catch (ex) {\r\n        console.log(ex);\r\n      }\r\n    })\r\n    .catch((err) => {\r\n      console.log(\"catch err\", err);\r\n    });\r\n\r\n  // dispatch({\r\n  //     type: actionTypes.PRODUCT,\r\n  //     data: product\r\n  // })\r\n};\r\n\r\nexport const _getProducts = (data) => {\r\n  return {\r\n    type: actionTypes.PRODUCT,\r\n    data,\r\n  };\r\n};\r\n\r\nexport const _getFilteredProducts = (data) => {\r\n  return {\r\n    type: actionTypes.FILTER_PRODUCT,\r\n    data,\r\n  };\r\n};\r\n\r\nexport const applyFilter = (param, data) => async (dispatch) => {\r\n  let query = buildQuery(param);\r\n  console.log(\"Build Query\", query);\r\n\r\n  let filteredData = filterData(data.products, query);\r\n  dispatch(_getFilteredProducts(filteredData));\r\n};\r\n\r\nconst buildQuery = (filter) => {\r\n  let query = {};\r\n  for (let keys in filter) {\r\n    query[keys] = filter[keys];\r\n  }\r\n  return query;\r\n};\r\n\r\nconst filterData = (data, query) => {\r\n  const keysHavingMinMax = [\"price\"];\r\n\r\n  const filteredData = data.filter((item) => {\r\n    for (let keys in query) {\r\n      if (query[keys] === undefined) return false;\r\n      else if (keysHavingMinMax.includes(keys)) {\r\n        if (query[keys][\"min\"] !== null && item[keys] < query[keys][\"min\"]) {\r\n          return false;\r\n        }\r\n        if (query[keys][\"max\"] !== null && item[keys] > query[keys][\"max\"]) {\r\n          return false;\r\n        }\r\n      } else if (!query[keys].includes(item[keys])) return false;\r\n    }\r\n    return true;\r\n  });\r\n\r\n  return filteredData;\r\n};\r\n"],"mappings":"AAAA,OAAO,KAAKA,WAAW,MAAM,SAAS;AACtC,OAAOC,KAAK,MAAM,OAAO;AAEzB,MAAMC,iBAAiB,GAAG,CACxB;EACEC,EAAE,EAAE,CAAC;EACLC,QAAQ,EAAE,MAAM;EAChBC,WAAW,EAAE,CACX;IACEF,EAAE,EAAE,CAAC;IACLG,IAAI,EAAE;EACR,CAAC,EACD;IACEH,EAAE,EAAE,CAAC;IACLG,IAAI,EAAE;EACR,CAAC;AAEL,CAAC,EACD;EACEH,EAAE,EAAE,CAAC;EACLC,QAAQ,EAAE,KAAK;EACfC,WAAW,EAAE,CACX;IACEF,EAAE,EAAE,CAAC;IACLG,IAAI,EAAE;EACR,CAAC,EACD;IACEH,EAAE,EAAE,CAAC;IACLG,IAAI,EAAE;EACR,CAAC;AAEL,CAAC,CACF;AAED,MAAMC,OAAO,GAAG,CACd;EACEJ,EAAE,EAAE,CAAC;EACLK,QAAQ,EAAEC,OAAO,CAAC,qCAAqC,CAAC;EACxDC,IAAI,EAAE,WAAW;EACjBC,KAAK,EAAE;AACT,CAAC,EACD;EACER,EAAE,EAAE,CAAC;EACLK,QAAQ,EAAEC,OAAO,CAAC,qCAAqC,CAAC;EACxDC,IAAI,EAAE,WAAW;EACjBC,KAAK,EAAE;AACT,CAAC,EACD;EACER,EAAE,EAAE,CAAC;EACLK,QAAQ,EAAEC,OAAO,CAAC,qCAAqC,CAAC;EACxDC,IAAI,EAAE,WAAW;EACjBC,KAAK,EAAE;AACT,CAAC,CACF;AAED,OAAO,MAAMC,oBAAoB,GAAGA,CAAA,KAAM,MAAOC,QAAQ,IAAK;EAC5D,IAAIC,OAAO,GAAG,EAAE;EAChB,MAAMb,KAAK,CAAC;IACVc,MAAM,EAAE,KAAK;IACbC,GAAG,EAAE;EACP,CAAC,CAAC,CACCC,IAAI,CAAEC,GAAG,IAAK;IACbC,OAAO,CAACC,GAAG,CAAC,mBAAmB,EAAEF,GAAG,CAACG,IAAI,CAAC;IAE1C,IAAIC,SAAS,GAAGJ,GAAG,CAACG,IAAI,CAACA,IAAI,CAACE,MAAM,CAAEC,CAAC,IAAKA,CAAC,CAACC,gBAAgB,KAAK,IAAI,CAAC;IAExEH,SAAS,CAACI,GAAG,CAAEC,IAAI,IAAK;MACtB,IAAIC,CAAC,GAAG;QACNzB,EAAE,EAAEwB,IAAI,CAACE,EAAE;QACXzB,QAAQ,EAAEuB,IAAI,CAACG,QAAQ;QACvBzB,WAAW,EAAEa,GAAG,CAACG,IAAI,CAACA,IAAI,CACvBE,MAAM,CAAEC,CAAC,IAAKA,CAAC,CAACC,gBAAgB,KAAKE,IAAI,CAACE,EAAE,CAAC,CAC7CH,GAAG,CAAEK,CAAC,IAAK;UACV,OAAO;YACL5B,EAAE,EAAE4B,CAAC,CAACF,EAAE;YACRvB,IAAI,EAAEyB,CAAC,CAACD;UACV,CAAC;QACH,CAAC;MACL,CAAC;MACD,OAAOhB,OAAO,CAACkB,IAAI,CAACJ,CAAC,CAAC;IACxB,CAAC,CAAC;EACJ,CAAC,CAAC,CACDK,KAAK,CAAEC,GAAG,IAAK;IACdf,OAAO,CAACC,GAAG,CAAC,gBAAgB,EAAEc,GAAG,CAAC;EACpC,CAAC,CAAC;EAEJrB,QAAQ,CAAC;IACPsB,IAAI,EAAEnC,WAAW,CAACoC,gBAAgB;IAClCf,IAAI,EAAEP;EACR,CAAC,CAAC;AACJ,CAAC;AAED,OAAO,MAAMuB,WAAW,GAAGA,CAAA,KAAM,MAAOxB,QAAQ,IAAK;EACnD,MAAMZ,KAAK,CAAC;IACVc,MAAM,EAAE,KAAK;IACbC,GAAG,EAAE;EACP,CAAC,CAAC,CACCC,IAAI,CAAEC,GAAG,IAAK;IACb,IAAI;MACF,IAAIoB,WAAW,GAAGpB,GAAG,CAACG,IAAI,CAACA,IAAI,CAACK,GAAG,CAAEC,IAAI,IAAK;QAC5C,OAAO;UACLxB,EAAE,EAAEwB,IAAI,CAACE,EAAE;UACXU,UAAU,EAAEZ,IAAI,CAACa,UAAU;UAC3BhC,QAAQ,EAAG,yBAAwBmB,IAAI,CAACc,UAAW,EAAC;UACpD/B,IAAI,EAAEiB,IAAI,CAACe,WAAW;UACtB/B,KAAK,EAAEgB,IAAI,CAAChB;QACd,CAAC;MACH,CAAC,CAAC;MACFE,QAAQ,CAAC8B,YAAY,CAACL,WAAW,CAAC,CAAC;MACnCzB,QAAQ,CAAC+B,oBAAoB,CAACN,WAAW,CAAC,CAAC;IAC7C,CAAC,CAAC,OAAOO,EAAE,EAAE;MACX1B,OAAO,CAACC,GAAG,CAACyB,EAAE,CAAC;IACjB;EACF,CAAC,CAAC,CACDZ,KAAK,CAAEC,GAAG,IAAK;IACdf,OAAO,CAACC,GAAG,CAAC,WAAW,EAAEc,GAAG,CAAC;EAC/B,CAAC,CAAC;;EAEJ;EACA;EACA;EACA;AACF,CAAC;AAED,OAAO,MAAMS,YAAY,GAAItB,IAAI,IAAK;EACpC,OAAO;IACLc,IAAI,EAAEnC,WAAW,CAAC8C,OAAO;IACzBzB;EACF,CAAC;AACH,CAAC;AAED,OAAO,MAAMuB,oBAAoB,GAAIvB,IAAI,IAAK;EAC5C,OAAO;IACLc,IAAI,EAAEnC,WAAW,CAAC+C,cAAc;IAChC1B;EACF,CAAC;AACH,CAAC;AAED,OAAO,MAAM2B,WAAW,GAAGA,CAACC,KAAK,EAAE5B,IAAI,KAAK,MAAOR,QAAQ,IAAK;EAC9D,IAAIqC,KAAK,GAAGC,UAAU,CAACF,KAAK,CAAC;EAC7B9B,OAAO,CAACC,GAAG,CAAC,aAAa,EAAE8B,KAAK,CAAC;EAEjC,IAAIE,YAAY,GAAGC,UAAU,CAAChC,IAAI,CAACiC,QAAQ,EAAEJ,KAAK,CAAC;EACnDrC,QAAQ,CAAC+B,oBAAoB,CAACQ,YAAY,CAAC,CAAC;AAC9C,CAAC;AAED,MAAMD,UAAU,GAAI5B,MAAM,IAAK;EAC7B,IAAI2B,KAAK,GAAG,CAAC,CAAC;EACd,KAAK,IAAIK,IAAI,IAAIhC,MAAM,EAAE;IACvB2B,KAAK,CAACK,IAAI,CAAC,GAAGhC,MAAM,CAACgC,IAAI,CAAC;EAC5B;EACA,OAAOL,KAAK;AACd,CAAC;AAED,MAAMG,UAAU,GAAGA,CAAChC,IAAI,EAAE6B,KAAK,KAAK;EAClC,MAAMM,gBAAgB,GAAG,CAAC,OAAO,CAAC;EAElC,MAAMJ,YAAY,GAAG/B,IAAI,CAACE,MAAM,CAAEI,IAAI,IAAK;IACzC,KAAK,IAAI4B,IAAI,IAAIL,KAAK,EAAE;MACtB,IAAIA,KAAK,CAACK,IAAI,CAAC,KAAKE,SAAS,EAAE,OAAO,KAAK,CAAC,KACvC,IAAID,gBAAgB,CAACE,QAAQ,CAACH,IAAI,CAAC,EAAE;QACxC,IAAIL,KAAK,CAACK,IAAI,CAAC,CAAC,KAAK,CAAC,KAAK,IAAI,IAAI5B,IAAI,CAAC4B,IAAI,CAAC,GAAGL,KAAK,CAACK,IAAI,CAAC,CAAC,KAAK,CAAC,EAAE;UAClE,OAAO,KAAK;QACd;QACA,IAAIL,KAAK,CAACK,IAAI,CAAC,CAAC,KAAK,CAAC,KAAK,IAAI,IAAI5B,IAAI,CAAC4B,IAAI,CAAC,GAAGL,KAAK,CAACK,IAAI,CAAC,CAAC,KAAK,CAAC,EAAE;UAClE,OAAO,KAAK;QACd;MACF,CAAC,MAAM,IAAI,CAACL,KAAK,CAACK,IAAI,CAAC,CAACG,QAAQ,CAAC/B,IAAI,CAAC4B,IAAI,CAAC,CAAC,EAAE,OAAO,KAAK;IAC5D;IACA,OAAO,IAAI;EACb,CAAC,CAAC;EAEF,OAAOH,YAAY;AACrB,CAAC"},"metadata":{},"sourceType":"module"}